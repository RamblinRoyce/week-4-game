<!DOCTYPE html>
<html>
<head>

	<meta charset="UTF-8">
  	<title>simple crystal game</title>

	<link rel="stylesheet" type="text/css" href="assets/css/reset.css">

	<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.6/spacelab/bootstrap.min.css" rel="stylesheet" integrity="sha384-PpvUDg6Tgcp6nh5chOo8teebMjoOXeU/PVfbPIRL4dymXdX1LuGS8ZpBUUqjDZ0d" crossorigin="anonymous">


	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">

	<link rel="stylesheet" type="text/css" href="assets/css/style.css">

  <style type="text/css">

    .crystalImage {
      width: 200px;
      height: 200px;
    }
  </style>
</head>
<body>

<h1>CrystalsCollector!</h1>

<p> </p>

<div class="panel panel-default">
	<div class="panel-body">
<p>
	<strong>Random Number to Match : </strong><span id="number">0</span>
</p>
	</div>
</div>

<div class="panel panel-default">
	<div class="panel-body">
		<strong>Wins: </strong> <span id="winCounter">0</span>
	</div>
</div>

<!-- Fifth Panel: Holds the number of Losses. -->
<div class="panel panel-default">
	<div class="panel-body">
		<strong>Losses: </strong> <span id="lossCounter">0</span>
	</div>
</div>

<div class="panel panel-default">
	<div class="panel-body">
		<strong>Your total score is : </strong><span id="yourNumber">0</span>
	</div>
</div>



<div id="crystals">
</div>

<!-- jQuery -->
<script type="text/javascript" src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
<script type="text/javascript">
  $( document ).ready(function() {

  	// set initial values
    var counter =0;
    var wins = 0;
    var losses = 0;
  
    //function resetNumToGuess() {
	    var numberToGuess = Math.floor(Math.random() * 102) + 19;
	    $('#number').text(numberToGuess);
	//}

	    var imageCrysNum_1 = Math.floor(Math.random() * 12) + 1;
	    var imageCrysNum_2 = Math.floor(Math.random() * 12) + 1;
	    var imageCrysNum_3 = Math.floor(Math.random() * 12) + 1;
	    var imageCrysNum_4 = Math.floor(Math.random() * 12) + 1;

		var imageCrystal_1 = $('<img>');     
		imageCrystal_1.attr('data-num', imageCrysNum_1);
		imageCrystal_1.attr('src', '../../assets/images/rock-crystal-gemstone.jpg');
		imageCrystal_1.attr('alt', 'crystals');
		imageCrystal_1.addClass('crystalImage');
		$('#crystals').append(imageCrystal_1);

		var imageCrystal_2 = $('<img>');     
		imageCrystal_2.attr('data-num', imageCrysNum_2);
		imageCrystal_2.attr('src', '../../assets/images/30956_large_Superman_Memory_Crystals_FP_Wide.png');
		imageCrystal_2.attr('alt', 'crystals');
		imageCrystal_2.addClass('crystalImage');
		$('#crystals').append(imageCrystal_2);

		var imageCrystal_3 = $('<img>');     
		imageCrystal_3.attr('data-num', imageCrysNum_3);
		imageCrystal_3.attr('src', '../../assets/images/2bf8885.jpg');
		imageCrystal_3.attr('alt', 'crystals');
		imageCrystal_3.addClass('crystalImage');
		$('#crystals').append(imageCrystal_3);

		var imageCrystal_4 = $('<img>');     
		imageCrystal_4.attr('data-num', imageCrysNum_4);
		imageCrystal_4.attr('src', '../../assets/images/07_IMG_1805598.jpg');
		imageCrystal_4.attr('alt', 'crystals');
		imageCrystal_4.addClass('crystalImage');
		$('#crystals').append(imageCrystal_4);
	
    
    $('.crystalImage').on('click', function(){
      counter = counter + parseInt($(this).data('num'));
      
      $('#yourNumber').text(counter);

      if (counter == numberToGuess){
      	alert('You won!!!!');
        wins++;
        $('#winCounter').html(wins);
        counter = 0;
        $('#yourNumber').text(counter);
        //var numberToGuess = Math.floor(Math.random() * 102) + 19;
	    //$('#number').text(numberToGuess);
        // resetNumToGuess();
        //startGame(); // restart the game
      }else if (counter > numberToGuess){
      	alert('You lost!');
        losses++;
        $('#lossCounter').html(losses);
        counter = 0;
        $('#yourNumber').text(counter);
        //var numberToGuess = Math.floor(Math.random() * 102) + 19;
	    //$('#number').text(numberToGuess);
        // resetNumToGuess();
        //startGame(); // restart the game
      }
    });
	
  });



// startGame()
// Its how we we will start and restart the game. (Note: It's not being run here. It's just being made for future use.)
function startGame() {
	// Reset the guesses back to 0
	

}

// checkLettesr() function
// It's where we will do all of the comparisons for matches. Again, it's not being called here. It's just being made for future use.
function checkLetters(letter) {

	var letterInWord = false; // this boolean will be toggled based on whether or not a user letter is found anywhere in the word

	// Check if a leter exists inside the array at all.
	for (var i=0; i<numBlanks; i++) {
		if(chosenWord[i] == letter) {
			letterInWord = true; // if the letter exists then toggle this boolean to true. This will be used in the next step. 
 		}
	}

	// If the letter exists somewhere in the word, then figure out exactly where (which indices)
	if(letterInWord){
	
		// loop through the word 
		for (var i=0; i<numBlanks; i++){

			// Populate the blanksAndSuccesses with every instance of the letter.
			if(chosenWord[i] == letter) {
				blanksAndSuccesses[i] = letter; // here we set the specific space in blanks and letter equal to the letter when there is a match.
			}
		}
		console.log(blanksAndSuccesses); // logging for testing
	}
	// If the letter doesn't exist at all...
	else {
		wrongGuesses.push(letter); // then we add the letter to the list of wrong letters
		numGuesses--; // and we subtract one of the guesses
	}
}

// roundComplete() function
// Here we will have all of the code that needs to be run after each guess is made
function roundComplete(){

	// First, log an initial status update in the console telling us how many wins, losses, and guesses are left
	console.log("WinCount: " + winCounter + " | LossCount: " + lossCounter + " | NumGuesses: " + numGuesses);

	// Update the HTML to reflect the new number of guesses. Also update the correct guesses.
	document.getElementById("guessesLeft").innerHTML= numGuesses;
	document.getElementById("wordblanks").innerHTML = blanksAndSuccesses.join(" "); // This will print the array of guesses and blanks onto the page
	document.getElementById("wrongGuesses").innerHTML = wrongGuesses.join(" "); // this will print the wrong guesses onto the page.

	// If we have gotten all the letters to match the solution... 
	if (lettersInChosenWord.toString() == blanksAndSuccesses.toString()) {
		winCounter++; // add to the win counter 
		alert("You win!"); // give the user an alert

		// Update the win counter in the HTML
		document.getElementById("winCounter").innerHTML= winCounter;
		startGame(); // restart the game 
	}

	// If we've run out of guesses
	else if(numGuesses == 0) {
		lossCounter++; 	 // add to the loss counter 
		alert("You lose"); // give the user an alert

		// Update the loss counter in the HTML
		document.getElementById("lossCounter").innerHTML= lossCounter; 
		startGame(); // restart the game
	}

}

// MAIN PROCESS (THIS IS THE CODE THAT CONTROLS WHAT IS ACTUALLY RUN)
// ==================================================================================================

// Starts the Game by running the startGame() function
startGame();

// Then initiates the function for capturing key clicks.
document.onkeyup = function(event) {
	letterGuessed = String.fromCharCode(event.keyCode).toLowerCase(); // converts all key clicks to lowercase lettesr
	
	checkLetters(letterGuessed); // runs the code to check for correctness 
	roundComplete(); // runs the code after each round is done
}


</script>
</body>
</html>